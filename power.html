{% extends "basic.html" %}
{% block header %}
<script>
$(document).ready(function(){
    $('.panels').hide();

    $('#pick_reboot').click(function(){
        $('.panels').hide();
        $('#reboot_panel').show();
        startCountdown(20, 'reboot_timer', 'Reboot');
    });
    $('#pick_shutdown').click(function(){
        $('.panels').hide();
        $('#shutdown_panel').show();
        startCountdown(20, 'shutdown_timer', 'Shut Down');
    });
});

function startCountdown(seconds, timerId, action) {
    let counter = seconds;
    const interval = setInterval(() => {
        document.getElementById(timerId).innerHTML = counter;
        counter--;

        if (counter < 0) {
            clearInterval(interval);
            if (action === 'Reboot') {
                window.location.href = "/reboot8675309";
            } else if (action === 'Shut Down') {
                window.location.href = "/shutdown8675309";
            }
        }
    }, 1000);
}
</script>
<style>
p { line-height: 200%; }
span { line-height: 200%; }
</style>
{% endblock %}

{% block body %}
<h3>Power Options</h3>

<button type="button" id="pick_reboot">Reboot</button>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<button type="button" id="pick_shutdown">Shut Down</button>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="/"><button type="button">Cancel</button></a>
<br/><br/>
<div class="panels" id="reboot_panel">
Are you sure you want to REBOOT?<br/><br/>
Countdown: <span id="reboot_timer">20</span> seconds<br/><br/>
<a href="/reboot8675309"><button type="button" id="reboot">Reboot Now</button></a>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="/"><button type="button">Cancel</button></a>
</div>
<div class="panels" id="shutdown_panel">
Are you sure you want to SHUT DOWN?<br/><br/>
Countdown: <span id="shutdown_timer">20</span> seconds<br/><br/>
<a href="/shutdown8675309"><button type="button" id="shutdown">Shut Down Now</button></a>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="/"><button type="button">Cancel</button></a>
</div>

{% endblock %}
